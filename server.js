var _0x4e5d=['orangeGoal','update_timer','sprite','radius','scale','speed','kickPower','name','disableBodyCollision','create_oPlayer','team','push','server_info','created\x20new\x20player\x20with\x20id\x20','removeBody','splice','indexOf','remove_player','disconnect\x20player\x20','hspd','vspd','boundingRadiusCheck','sound_kick','blue','orange','reset','restart','floor','random','http','createServer','socket.io','/js','use','static','/assets','get','sendFile','/index.html','listen','log','Listening\x20on\x20port\x2080','World','Material','addContactMaterial','ContactMaterial','Body','addShape','Circle','addBody','Box','length','mass','emit','getTime','step','connected_player','player_move','player_kick','waitPlayer','move_player','body','position','xdir','broadcast','move_oPlayer','velocity','speedMax','update_ball','angle','abs','blueGoal','destroy_goalText'];(function(_0x35011e,_0xf43e2c){var _0x1847cb=function(_0x51ef27){while(--_0x51ef27){_0x35011e['push'](_0x35011e['shift']());}};_0x1847cb(++_0xf43e2c);}(_0x4e5d,0x18a));var _0x3d4b=function(_0x3846c3,_0x2eefea){_0x3846c3=_0x3846c3-0x0;var _0x3ee081=_0x4e5d[_0x3846c3];return _0x3ee081;};var playerList=[];var timerSec='00';var timerMin=0x3;var orangeScore=0x0;var blueScore=0x0;var background_index=0x0;var isGoal=![];var isGameStart=![];const express=require('express');const app=express();const server=require(_0x3d4b('0x0'))[_0x3d4b('0x1')](app);const io=require(_0x3d4b('0x2'))(server);const p2=require('p2');app['use'](_0x3d4b('0x3'),express['static'](__dirname+_0x3d4b('0x3')));app[_0x3d4b('0x4')]('/assets',express[_0x3d4b('0x5')](__dirname+_0x3d4b('0x6')));app[_0x3d4b('0x7')]('/',function(_0x22d986,_0x10b243){_0x10b243[_0x3d4b('0x8')](__dirname+_0x3d4b('0x9'));});let port=process.env.PORT;if(port==null||port==""){port = 8082;}server[_0x3d4b('0xa')](port, function(){console.log(`Listening on ${server.address().port}`);});var world=new p2[(_0x3d4b('0xd'))]({'gravity':[0x0,0x0]});var playerMaterial=new p2['Material']();var ballMaterial=new p2['Material']();var boxMaterial=new p2[(_0x3d4b('0xe'))]();world[_0x3d4b('0xf')](new p2[(_0x3d4b('0x10'))](playerMaterial,ballMaterial,{'friction':0x0,'restitution':0.5}));world['addContactMaterial'](new p2['ContactMaterial'](ballMaterial,boxMaterial,{'friction':0x0,'restitution':0x1}));var ball=new p2[(_0x3d4b('0x11'))]({'mass':0x1,'damping':0.1,'position':[0x280,0x168],'angle':0x0,'velocity':[0x0,0x0],'angularVelocity':0x0,'fixedRotation':![]});ball[_0x3d4b('0x12')](new p2[(_0x3d4b('0x13'))]({'radius':0x10*1.5,'material':ballMaterial}));world[_0x3d4b('0x14')](ball);var boxes=[];boxes[0x0]=new p2[(_0x3d4b('0x11'))]({'position':[0x280,0x28]});boxes[0x0][_0x3d4b('0x12')](new p2[(_0x3d4b('0x15'))]({'width':0x474,'height':0x2,'material':boxMaterial}));boxes[0x1]=new p2['Body']({'position':[0x280,0x2a8]});boxes[0x1][_0x3d4b('0x12')](new p2[(_0x3d4b('0x15'))]({'width':0x474,'height':0x2,'material':boxMaterial}));boxes[0x2]=new p2[(_0x3d4b('0x11'))]({'position':[0x43,0x91]});boxes[0x2][_0x3d4b('0x12')](new p2[(_0x3d4b('0x15'))]({'width':0x2,'height':0xc8,'material':boxMaterial}));boxes[0x3]=new p2[(_0x3d4b('0x11'))]({'position':[0x4ba,0x91]});boxes[0x3]['addShape'](new p2[(_0x3d4b('0x15'))]({'width':0x2,'height':0xc8,'material':boxMaterial}));boxes[0x4]=new p2[(_0x3d4b('0x11'))]({'position':[0x43,0x244]});boxes[0x4]['addShape'](new p2[(_0x3d4b('0x15'))]({'width':0x2,'height':0xc8,'material':boxMaterial}));boxes[0x5]=new p2[(_0x3d4b('0x11'))]({'position':[0x4ba,0x244]});boxes[0x5]['addShape'](new p2['Box']({'width':0x2,'height':0xc8,'material':boxMaterial}));boxes[0x6]=new p2[(_0x3d4b('0x11'))]({'position':[0x22,0xfa]});boxes[0x6][_0x3d4b('0x12')](new p2[(_0x3d4b('0x15'))]({'width':0x44,'height':0x2,'material':boxMaterial}));boxes[0x7]=new p2[(_0x3d4b('0x11'))]({'position':[0x22,0x1d1]});boxes[0x7]['addShape'](new p2[(_0x3d4b('0x15'))]({'width':0x44,'height':0x2,'material':boxMaterial}));boxes[0x8]=new p2[(_0x3d4b('0x11'))]({'position':[0x4dc,0xfa]});boxes[0x8][_0x3d4b('0x12')](new p2['Box']({'width':0x44,'height':0x2,'material':boxMaterial}));boxes[0x9]=new p2[(_0x3d4b('0x11'))]({'position':[0x4dc,0x1d1]});boxes[0x9][_0x3d4b('0x12')](new p2[(_0x3d4b('0x15'))]({'width':0x44,'height':0x2,'material':boxMaterial}));boxes[0xa]=new p2[(_0x3d4b('0x11'))]({'position':[0x4,0xe8]});boxes[0xa][_0x3d4b('0x12')](new p2[(_0x3d4b('0x15'))]({'width':0x2,'height':0x1d1,'material':boxMaterial}));boxes[0xb]=new p2[(_0x3d4b('0x11'))]({'position':[0x4fc,0xe8]});boxes[0xb][_0x3d4b('0x12')](new p2[(_0x3d4b('0x15'))]({'width':0x2,'height':0x1d1,'material':boxMaterial}));for(var i=0x0;i<boxes[_0x3d4b('0x16')];i++){boxes[i][_0x3d4b('0x17')]=0x0;world['addBody'](boxes[i]);}setInterval(function(){if(playerList['length']>=0x2){if(isGoal==![]){timerSec--;if(timerSec==0x0)timerSec='00';if(timerSec<0x0){timerMin--;timerSec=0x3b;}}if(isGameStart==![]){restartGame();io[_0x3d4b('0x18')]('destroy_waitText');isGameStart=!![];}}else if(isGameStart){if(background_index<0x3)background_index++;else background_index=0x0;restartGame();io[_0x3d4b('0x18')]('waitPlayer');isGameStart=![];}},0x3e8);var lastTimeSeconds=new Date()[_0x3d4b('0x19')]();setInterval(function(){var _0x2bd25c=new Date()[_0x3d4b('0x19')]()-lastTimeSeconds;lastTimeSeconds=new Date()[_0x3d4b('0x19')]();world[_0x3d4b('0x1a')](0x1/0x3c,_0x2bd25c,0xa);},0x3e8/0x3c);io['on']('connection',function(_0x35844b){_0x35844b['on'](_0x3d4b('0x1b'),onNewPlayer);_0x35844b['on']('disconnect',onDisconnect);_0x35844b['on'](_0x3d4b('0x1c'),onPlayer_move);_0x35844b['on'](_0x3d4b('0x1d'),onPlayer_kick);if(isGameStart==![]){_0x35844b[_0x3d4b('0x18')](_0x3d4b('0x1e'));}setInterval(function(){var _0x254fb7=find_playerID(_0x35844b['id']);if(!_0x254fb7){return;}_0x35844b[_0x3d4b('0x18')](_0x3d4b('0x1f'),{'x':_0x254fb7[_0x3d4b('0x20')][_0x3d4b('0x21')][0x0],'y':_0x254fb7[_0x3d4b('0x20')][_0x3d4b('0x21')][0x1],'xdir':_0x254fb7[_0x3d4b('0x22')]});_0x35844b[_0x3d4b('0x23')][_0x3d4b('0x18')](_0x3d4b('0x24'),{'id':_0x254fb7['id'],'x':_0x254fb7[_0x3d4b('0x20')][_0x3d4b('0x21')][0x0],'y':_0x254fb7[_0x3d4b('0x20')][_0x3d4b('0x21')][0x1],'xdir':_0x254fb7[_0x3d4b('0x22')]});_0x254fb7[_0x3d4b('0x20')]['position'][0x0]=clamp(_0x254fb7[_0x3d4b('0x20')]['position'][0x0],0x0,0x500);_0x254fb7[_0x3d4b('0x20')][_0x3d4b('0x21')][0x1]=clamp(_0x254fb7[_0x3d4b('0x20')]['position'][0x1],0x0,0x2d0);_0x254fb7[_0x3d4b('0x20')][_0x3d4b('0x25')][0x0]=clamp(_0x254fb7[_0x3d4b('0x20')][_0x3d4b('0x25')][0x0],-_0x254fb7['speedMax'],_0x254fb7['speedMax']);_0x254fb7['body'][_0x3d4b('0x25')][0x1]=clamp(_0x254fb7[_0x3d4b('0x20')][_0x3d4b('0x25')][0x1],-_0x254fb7[_0x3d4b('0x26')],_0x254fb7['speedMax']);io[_0x3d4b('0x18')](_0x3d4b('0x27'),{'x':ball[_0x3d4b('0x21')][0x0],'y':ball[_0x3d4b('0x21')][0x1],'angle':ball['angle']});ball[_0x3d4b('0x25')][0x0]=clamp(ball[_0x3d4b('0x25')][0x0],-0x64,0x64);ball[_0x3d4b('0x25')][0x1]=clamp(ball[_0x3d4b('0x25')][0x1],-0x64,0x64);ball[_0x3d4b('0x28')]+=(Math[_0x3d4b('0x29')](ball['velocity'][0x0])>Math[_0x3d4b('0x29')](ball[_0x3d4b('0x25')][0x1])?ball[_0x3d4b('0x25')][0x0]:ball[_0x3d4b('0x25')][0x1])/0xa;if(isGoal==![]&&isGameStart){if(ball[_0x3d4b('0x21')][0x0]>=1232.9&&ball[_0x3d4b('0x21')][0x1]>=252.5&&ball[_0x3d4b('0x21')][0x1]<=447.6){isGoal=!![];blueScore++;io[_0x3d4b('0x18')](_0x3d4b('0x2a'));setTimeout(function(){resetGame();io[_0x3d4b('0x18')](_0x3d4b('0x2b'));},0xbb8);}if(ball[_0x3d4b('0x21')][0x0]<=48.3&&ball['position'][0x1]>=252.5&&ball[_0x3d4b('0x21')][0x1]<=447.6){orangeScore++;isGoal=!![];io[_0x3d4b('0x18')](_0x3d4b('0x2c'));setTimeout(function(){resetGame();io[_0x3d4b('0x18')](_0x3d4b('0x2b'));},0xbb8);}}io[_0x3d4b('0x18')](_0x3d4b('0x2d'),{'timerMin':timerMin,'timerSec':timerSec});if(timerMin==0x0&&timerSec=='00'&&isGoal==![]){isGoal=!![];setTimeout(function(){if(background_index<0x3)background_index++;else background_index=0x0;restartGame();io[_0x3d4b('0x18')]('destroy_winText');},0x1388);}},0x3e8/0x3c);});function onNewPlayer(_0x479196){var _0x2ff9ff=new Player(this['id'],_0x479196[_0x3d4b('0x2e')],_0x479196[_0x3d4b('0x2f')],_0x479196[_0x3d4b('0x30')],_0x479196[_0x3d4b('0x31')],_0x479196[_0x3d4b('0x26')],_0x479196[_0x3d4b('0x32')],_0x479196[_0x3d4b('0x33')]);_0x2ff9ff[_0x3d4b('0x20')]=new p2[(_0x3d4b('0x11'))]({'mass':0x5,'damping':0.1,'position':[_0x2ff9ff['x'],_0x2ff9ff['y']],'angle':0x0,'velocity':[0x0,0x0],'angularVelocity':0x0,'fixedRotation':!![]});_0x2ff9ff[_0x3d4b('0x20')]['addShape'](new p2['Circle']({'radius':_0x2ff9ff[_0x3d4b('0x2f')]}));world[_0x3d4b('0x14')](_0x2ff9ff[_0x3d4b('0x20')]);for(var _0x1b2768=0x0;_0x1b2768<boxes['length'];_0x1b2768++){world[_0x3d4b('0x34')](_0x2ff9ff[_0x3d4b('0x20')],boxes[_0x1b2768]);}for(var _0x1b2768=0x0;_0x1b2768<playerList[_0x3d4b('0x16')];_0x1b2768++){this[_0x3d4b('0x18')](_0x3d4b('0x35'),{'id':playerList[_0x1b2768]['id'],'x':playerList[_0x1b2768][_0x3d4b('0x20')]['position'][0x0],'y':playerList[_0x1b2768]['body'][_0x3d4b('0x21')][0x1],'xdir':playerList[_0x1b2768][_0x3d4b('0x22')],'sprite':playerList[_0x1b2768][_0x3d4b('0x2e')],'name':playerList[_0x1b2768]['name'],'team':playerList[_0x1b2768][_0x3d4b('0x36')]});}this[_0x3d4b('0x23')]['emit'](_0x3d4b('0x35'),{'id':_0x2ff9ff['id'],'x':_0x2ff9ff['x'],'y':_0x2ff9ff['y'],'xdir':_0x2ff9ff[_0x3d4b('0x22')],'sprite':_0x2ff9ff[_0x3d4b('0x2e')],'name':_0x2ff9ff[_0x3d4b('0x33')],'team':_0x2ff9ff[_0x3d4b('0x36')]});playerList[_0x3d4b('0x37')](_0x2ff9ff);this[_0x3d4b('0x18')](_0x3d4b('0x38'),{'background_index':background_index,'team':_0x2ff9ff[_0x3d4b('0x36')],'orangeScore':orangeScore,'blueScore':blueScore});console['log'](_0x3d4b('0x39')+this['id']);}function onDisconnect(){var _0x4f5c4c=find_playerID(this['id']);if(_0x4f5c4c){world[_0x3d4b('0x3a')](_0x4f5c4c[_0x3d4b('0x20')]);playerList[_0x3d4b('0x3b')](playerList[_0x3d4b('0x3c')](_0x4f5c4c),0x1);}this[_0x3d4b('0x23')][_0x3d4b('0x18')](_0x3d4b('0x3d'),{'id':this['id']});console[_0x3d4b('0xb')](_0x3d4b('0x3e')+this['id']);}function onPlayer_move(_0x1282a2){var _0x5ce2d9=find_playerID(this['id']);if(_0x1282a2['hspd']!=0x0){_0x5ce2d9[_0x3d4b('0x22')]=_0x1282a2[_0x3d4b('0x3f')];}_0x5ce2d9[_0x3d4b('0x20')][_0x3d4b('0x25')][0x0]+=_0x1282a2['hspd']*_0x5ce2d9[_0x3d4b('0x31')];_0x5ce2d9[_0x3d4b('0x20')][_0x3d4b('0x25')][0x1]+=_0x1282a2[_0x3d4b('0x40')]*_0x5ce2d9[_0x3d4b('0x31')];}function onPlayer_kick(){var _0x6c6f68=find_playerID(this['id']);if(!_0x6c6f68){return;}if(p2['Broadphase'][_0x3d4b('0x41')](_0x6c6f68[_0x3d4b('0x20')],ball)){ball[_0x3d4b('0x25')][0x0]*=_0x6c6f68[_0x3d4b('0x32')];ball[_0x3d4b('0x25')][0x1]*=_0x6c6f68[_0x3d4b('0x32')];io[_0x3d4b('0x18')](_0x3d4b('0x42'));}}function resetGame(){ball[_0x3d4b('0x21')][0x0]=0x280;ball['position'][0x1]=0x168;ball[_0x3d4b('0x25')][0x0]=0x0;ball[_0x3d4b('0x25')][0x1]=0x0;ball[_0x3d4b('0x28')]=0x0;isGoal=![];for(var _0xe46428=0x0;_0xe46428<playerList[_0x3d4b('0x16')];_0xe46428++){if(playerList[_0xe46428][_0x3d4b('0x36')]==_0x3d4b('0x43')){playerList[_0xe46428]['body'][_0x3d4b('0x21')][0x0]=0xf0;playerList[_0xe46428][_0x3d4b('0x20')][_0x3d4b('0x21')][0x1]=0x168;playerList[_0xe46428][_0x3d4b('0x22')]=0x1;}if(playerList[_0xe46428][_0x3d4b('0x36')]==_0x3d4b('0x44')){playerList[_0xe46428][_0x3d4b('0x20')][_0x3d4b('0x21')][0x0]=0x410;playerList[_0xe46428][_0x3d4b('0x20')][_0x3d4b('0x21')][0x1]=0x168;playerList[_0xe46428][_0x3d4b('0x22')]=-0x1;}playerList[_0xe46428][_0x3d4b('0x20')][_0x3d4b('0x25')][0x0]=0x0;playerList[_0xe46428][_0x3d4b('0x20')][_0x3d4b('0x25')][0x1]=0x0;}io[_0x3d4b('0x18')](_0x3d4b('0x45'));}function restartGame(){timerSec='00';timerMin=0x3;orangeScore=0x0;blueScore=0x0;isGoal=![];resetGame();io['emit'](_0x3d4b('0x46'),{'background_index':background_index});}var Player=function(_0x3dc5ab,_0x76a71f,_0x18c4ef,_0x29e31f,_0x5dc9e8,_0x24b439,_0x12e0ef,_0x4d8fe8){this['id']=_0x3dc5ab;this[_0x3d4b('0x2e')]=_0x76a71f;this[_0x3d4b('0x2f')]=_0x18c4ef;this[_0x3d4b('0x30')]=_0x29e31f;this['speed']=_0x5dc9e8;this['speedMax']=_0x24b439;this[_0x3d4b('0x32')]=_0x12e0ef;this[_0x3d4b('0x33')]=_0x4d8fe8;if(blue_length()>orange_length()){this[_0x3d4b('0x36')]=_0x3d4b('0x44');this['x']=0x410;this['y']=0x168;this[_0x3d4b('0x22')]=-0x1;}else if(blue_length()<orange_length()){this[_0x3d4b('0x36')]='blue';this['x']=0xf0;this['y']=0x168;this[_0x3d4b('0x22')]=0x1;}else{var _0x11d8c8=Math[_0x3d4b('0x47')](Math[_0x3d4b('0x48')]()*0x2);if(_0x11d8c8==0x0){this[_0x3d4b('0x36')]=_0x3d4b('0x43');this['x']=0xf0;this['y']=0x168;this[_0x3d4b('0x22')]=0x1;}else{this[_0x3d4b('0x36')]=_0x3d4b('0x44');this['x']=0x410;this['y']=0x168;this[_0x3d4b('0x22')]=0x1;}}};function find_playerID(_0x20687e){for(var _0x29ba0f=0x0;_0x29ba0f<playerList['length'];_0x29ba0f++){if(playerList[_0x29ba0f]['id']==_0x20687e){return playerList[_0x29ba0f];}}return![];}function clamp(_0x65834e,_0x4f64c2,_0x3623e9){if(_0x65834e>_0x3623e9)return _0x3623e9;if(_0x65834e<_0x4f64c2)return _0x4f64c2;return _0x65834e;}function blue_length(){var _0x432ee9=0x0;for(var _0x3d9765=0x0;_0x3d9765<playerList['length'];_0x3d9765++){if(playerList[_0x3d9765][_0x3d4b('0x36')]==_0x3d4b('0x43')){_0x432ee9++;}}return _0x432ee9;}function orange_length(){var _0xfe7d84=0x0;for(var _0x5e1a1a=0x0;_0x5e1a1a<playerList[_0x3d4b('0x16')];_0x5e1a1a++){if(playerList[_0x5e1a1a][_0x3d4b('0x36')]==_0x3d4b('0x44')){_0xfe7d84++;}}return _0xfe7d84;}